import{R as Ut,d as I,y as B,u as e,K as ye,x as me,q as S,T as w,W as Wt,X as L,k as $,D as G,A as pe,Y as Ke,Z as Vt,a0 as Z,a1 as Jt}from"./n-8nospdfC.js";import{c as ce,a as Re,b as ue,d as Ye,e as Qt,t as Kt,F as Oe,f as Yt}from"./d-DmHB3tw8.js";import{p as Xe,H as ne}from"./c-DXfZJaz8.js";import{L as Xt,X as Zt,S as en,C as tn,a as Ge,b as nn,c as an,T as Ze,P as et,D as tt,d as rn,I as sn,e as on,H as ln,f as dn,E as cn,g as un,G as mn}from"./a-B1bY4f-H.js";import{H as pn,O as nt,C as we,e as gn,T as at,D as rt,P as hn,R as fn,f as xn,g as st,h as bn,i as yn,S as ot,j as wn,k as vn,l as Nn,m as kn,n as it,o as lt,p as dt,q as Cn,I as ct,r as ut,s as mt,t as pt,L as gt,u as ht,v as Sn,w as En}from"./b-Dx3sMu51.js";import"./index-CYXnlCfY.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();function dr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ge(t=64){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let a="";for(let r=0;r<t;r++)a+=n[Math.floor(Math.random()*n.length)];return a}const Fe=ce({id:ue().default(()=>ge(64)),name:ue().required(),cards:Re().of(ue().required()).required()}).required(),ft=ce({id:ue().default(()=>ge(64)),timestamp:Ye().default(()=>Date.now())}).required(),Ae="0.0.1",Rn=ce({groups:Re().of(Fe.required()).required(),simulator:ce({groups:Re().of(ft.required()).required(),settings:ce({speed:Ye().min(1).max(5).default(1),showFusions:Qt().default(!0)}).required()}).required(),version:ue().default(Ae).required()}).required(),A="storage",Ie="storage_event",xt=["default-random-types","default-pool-highest-fusion"];function He(){const t=j(),n={id:ge(),name:"Untitled",cards:[]};return t.groups.push(n),localStorage.setItem(A,JSON.stringify(t)),D(),n}function In(t){const n=j();return n.groups.push(t),localStorage.setItem(A,JSON.stringify(n)),D(),t}function Tn(t){const n=j(),a=n.groups.findIndex(r=>r.id===t);if(a===-1){console.error(`Internal Error: Group '${t}' was not found!`);return}n.groups.splice(a,1),localStorage.setItem(A,JSON.stringify(n)),D()}function bt({...t}){const n=j(),a=n.groups.findIndex(r=>r.id===t.id);if(a===-1){console.error(`Internal Error: Group '${t.id}' was not found!`);return}n.groups[a]={...n.groups[a],...t},localStorage.setItem(A,JSON.stringify(n)),D()}function Pn(t,...n){const a=j(),r=a.groups.findIndex(s=>s.id===t);if(r===-1){console.error(`Internal Error: Group '${t}' was not found!`);return}a.groups[r]={...a.groups[r],cards:[...a.groups[r].cards,...n.map(s=>s.id)]},localStorage.setItem(A,JSON.stringify(a)),D()}function zn(t,...n){const a=j(),r=a.groups.findIndex(s=>s.id===t);if(r===-1){console.error(`Internal Error: Group '${t}' was not found!`);return}a.groups[r]={...a.groups[r],cards:a.groups[r].cards.reduce((s,o)=>{const i=s.toRemove.findIndex(l=>l.id===o);return i!==-1?(s.toRemove.splice(i,1),s):(s.array.push(o),s)},{array:[],toRemove:[...n]}).array},localStorage.setItem(A,JSON.stringify(a)),D()}function $n(t,n,a){var i;const r={groups:[],simulator:{groups:n.map(l=>({id:l,timestamp:Date.now()})),settings:{showFusions:!0,speed:2}},version:"0.0.1"};let s=t==null?void 0:t.groups;try{s=s.map(l=>Fe.validateSync(l))}catch(l){s=null,console.error("Error trying to migrate to new storage version",l,s)}let o=(i=t==null?void 0:t.simulator)==null?void 0:i.groups;try{o=o.map(l=>ft.validateSync(l))}catch(l){o=null,console.error("Error trying to migrate to new storage version",l,o)}return s&&(r.groups=s),o&&(r.simulator.groups=o),(!s||!o)&&a(),localStorage.setItem(A,JSON.stringify(r)),D(),r}function j(){const t=localStorage.getItem(A);if(!t)return Ue();try{const n=JSON.parse(t);return n.version?Rn.validateSync(n):$n(n,xt,()=>We(String(t)))}catch{return We(String(t)),Ue()}}function Ue(){const t={groups:[],simulator:{groups:xt.map(n=>({id:n,timestamp:Date.now()})),settings:{showFusions:!0,speed:1}},version:Ae};return localStorage.setItem(A,JSON.stringify(t)),D(),t}function D(){document.dispatchEvent(new Event(Ie))}function We(t){localStorage.setItem(`${A}_${Date.now()}`,t)}const yt=Ut.createContext({groups:[],simulator:{groups:[],settings:{showFusions:!0,speed:1}},version:Ae});function On({children:t}){const[n,a]=I(j());return B(()=>{const r=()=>{a(j())};return document.addEventListener(Ie,r),()=>document.removeEventListener(Ie,r)},[]),e(yt.Provider,{value:n,children:t})}const wt=ye({hand:[],setHand:()=>{},cards:[],setCards:()=>{},resets:0,setResets:()=>{}});function q(){const t=me(yt),n=S(()=>{t.simulator.settings.speed<2?t.simulator.settings.speed=3:t.simulator.settings.speed=1,localStorage.setItem(A,JSON.stringify(t)),D()},[t]),a=S(()=>{t.simulator.settings.showFusions=!t.simulator.settings.showFusions,localStorage.setItem(A,JSON.stringify(t)),D()},[t]),r=w(()=>t.simulator.settings.showFusions,[t]);return{simulator:t.simulator,groups:t.groups,version:t.version,toggleSpeed:n,togglePrediction:a,isPredictionEnabled:r}}function Ve(t,n){return n.reduce((a,r)=>(a.push(...r.cards),a),[]).map(a=>t(a)).filter(a=>a)}var R=(t=>(t.MONSTER="MONSTER",t.EQUIP="EQUIP",t.MAGIC="MAGIC",t.FIELD="FIELD",t.RITUAL="RITUAL",t.TRAP="TRAP",t))(R||{});const Me=5;function Gn(t){const n=[...t];for(let a=n.length-1;a>0;a--){const r=Math.floor(Math.random()*(a+1));[n[a],n[r]]=[n[r],n[a]]}return n}function Te(t){return Gn(t)}function Pe(t){return Te(t).slice(0,Me)}const vt=ye({}),Nt=ye({cards:[],groups:[]});function W(){const{cards:t,groups:n}=me(Nt);return{cards:t,groups:n}}function kt(){const{cards:t,groups:n}=me(vt);return{cards:t,groups:n}}function H(){const{cards:t}=W(),n=S(s=>t.find(o=>o.id===s),[t]),a=S((...s)=>t.filter(o=>s.includes(o.id)),[t]),r=S(s=>t.find(o=>o.name===s),[t]);return{findCardById:n,findCardsByIds:a,findCardByName:r,cards:t}}function Fn({children:t}){const[n,a]=I(0),{groups:r,simulator:s}=q(),{groups:o}=W(),{findCardById:i}=H(),l=w(()=>[...r,...o],[r,o]),[c,p]=I(Te(Ve(i,s.groups.map(h=>l.find(m=>m.id===h.id)).filter(h=>!!h)))),[d,u]=I(Pe(c));return B(()=>{p(Te(Ve(i,s.groups.map(h=>l.find(m=>m.id===h.id)).filter(h=>!!h))))},[r]),e(wt.Provider,{value:{resets:n,setResets:a,hand:d,setHand:u,cards:c,setCards:p},children:t})}const Ct=ye({fusing:!1,queueFusions:[],index:-1,setIndex:()=>{},setFusing:()=>{},setQueueFusions:()=>{},reset:()=>{}});function An({children:t}){const[n,a]=I(!1),[r,s]=I(-1),[o,i]=I([]),l=S(()=>{a(!1),s(-1),i([])},[a,s,i]);return e(Ct.Provider,{value:{fusing:n,setFusing:a,index:r,setIndex:s,queueFusions:o,setQueueFusions:i,reset:l},children:t})}function f(...t){return Kt(Wt(t))}function J({className:t,...n}){return e("div",{"data-slot":"skeleton",className:f("bg-primary/10 animate-pulse rounded-md",t),...n})}function Mn(){const[{url:t}]=L();return t.includes("/simulator")?e($,{}):e("main",{className:"!max-w-[960px] flex flex-col gap-6",children:[e(J,{className:"h-[427px] w-full rounded-xl bg-gradient-one opacity-45"}),e("div",{className:"flex gap-4",children:[e(J,{className:"h-[81.79px] w-full rounded-xl bg-gradient-one opacity-45"}),e(J,{className:"h-[81.79px] w-full rounded-xl bg-gradient-one opacity-45"})]}),e(J,{className:"h-[350px] w-full rounded-xl bg-gradient-one opacity-45"}),e(J,{className:"h-[350px] w-full rounded-xl bg-gradient-one opacity-45"}),e(J,{className:"h-[350px] w-full rounded-xl bg-gradient-one opacity-45"}),e(J,{className:"h-[350px] w-full rounded-xl bg-gradient-one opacity-45"})]})}function Dn({children:t,dataLessComponents:n}){const{cards:a,groups:r}=kt();return e($,{children:[n[0],a&&r?e(Nt.Provider,{value:{cards:a,groups:r},children:t}):e(Mn,{}),n[1]]})}function E(t){return St("/",t)}function N(t){return console.error("Internal Error: Assets API not found."),St(void 0,t)}function St(t,n){if(!t||!n)return t||n;const a="/",r=!n.startsWith(a)&&!t.endsWith(a);return t.endsWith(a)&&n.startsWith(a)?t+n.slice(1):r?t+a+n:t+n}const _n="app_v1.json.gz",Ln="groups_v1.json.gz";async function Bn(){try{const t=await fetch(N(`/data/${_n}`));if(!t.ok)throw new Error("Connection failed!");let n;{const a=await t.arrayBuffer(),r=Xe.inflate(a,{to:"string"});n=JSON.parse(r)}return n}catch(t){console.error("Error loading app data: ",t)}return[]}async function jn(){try{const t=await fetch(N(`/data/${Ln}`));if(!t.ok)throw new Error("Connection failed!");let n;{const a=await t.arrayBuffer(),r=Xe.inflate(a,{to:"string"});n=JSON.parse(r)}return n}catch(t){console.error("Error loading groups data: ",t)}return[]}function qn({children:t}){const[n,a]=I(),[r,s]=I(),o=S(async()=>{a(await Bn())},[]),i=S(async()=>{s(await jn())},[]);return B(()=>{o(),i()},[]),e(vt.Provider,{value:{cards:n,groups:r},children:t})}function Hn({children:t,dataLessComponents:n}){return e(qn,{children:e(Dn,{dataLessComponents:n,children:e(On,{children:e(Fn,{children:e(An,{children:t})})})})})}function Et({size:t}){return e(Xt,{className:"animate-spin",size:t})}function Un(){return e("div",{className:"transition-all",children:[e("div",{class:"z-40 fixed w-[100vw] h-[100vh] left-0 top-0 bg-black opacity-70"}),e("div",{className:"fixed z-50 left-[50%] top-[50%]",style:{transform:"translate(-50%, -50%)"},children:e(Et,{size:52})})]})}function K({children:t,...n}){const[a,r]=I(!1);return e("button",{...n,className:f("relative px-6 py-3 text-4xl border-2 border-gray-900 text-slate-200 rounded-lg cursor-pointer shadow-md shadow-black hover:shadow-orange-300 hover:shadow-md hover:text-orange-200 active:shadow active:text-orange-300 disabled:text-gray-500 disabled:shadow-black disabled:shadow-sm transition-all disabled:cursor-not-allowed",n.className??""),style:{background:`url(${N("/images/assets/border_top.webp")})`,backgroundPosition:a?"center":"right",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated",textShadow:"0 0 8px black",transitionDuration:"250ms",userSelect:"none"},onMouseEnter:()=>!n.disabled&&r(!0),onMouseLeave:()=>!n.disabled&&r(!1),children:[e("span",{className:"absolute z-10 inset-0 bg-black opacity-30 border border-white rounded-lg",style:{opacity:n.disabled?"70%":a?"50%":void 0,transitionDuration:"250ms",background:n.disabled?"black":void 0}}),e("div",{className:"z-40 relative",children:t})]})}const Ce="Fusion Simulator - Yu-Gi-Oh! Forbidden Memories";function Y({title:t,titlePrefix:n,titleSuffix:a,description:r,keywords:s}){const o=w(()=>n?`${n} - ${Ce}`:a?`${Ce} - ${a}`:t??Ce,[a]);return e(pn,{title:o,meta:[{name:"keywords",content:s},{name:"description",content:r},{property:"og:title",content:o},{property:"og:description",content:r},{name:"twitter:title",content:o},{name:"twitter:description",content:r}]})}function De(){return e($,{children:[e(Y,{titlePrefix:"404 Not Found",description:"Route was not found!",keywords:"404, not found"}),e("section",{className:"flex flex-col justify-center items-center",children:[e("p",{className:"text-8xl text-red-800",children:"404"}),e("p",{className:"text-4xl text-red-300",children:"Page Not Found"}),e("a",{href:E("/"),children:e(K,{className:"mt-4 px-8",children:"HOME"})})]})]})}const ae=fn,he=xn,Rt=hn,_e=G(({className:t,...n},a)=>e(nt,{ref:a,className:f("fixed inset-0 z-50 bg-black/80  data-[state=closed]:animatea-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n}));_e.displayName=nt.displayName;const re=G(({className:t,children:n,...a},r)=>e(Rt,{children:[e(_e,{}),e(we,{ref:r,className:f("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border  p-6 shadow-lg duration-200 data-[state=closed]:animatea-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),style:{background:`url(${N("/images/assets/background.webp")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated"},...a,children:[n,e(gn,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e(Zt,{className:"h-4 w-4"}),e("span",{className:"sr-only",children:"Close"})]})]})]}));re.displayName=we.displayName;const Wn=G(({className:t,children:n,...a},r)=>e(Rt,{children:[e(_e,{}),e(we,{ref:r,className:f("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200  data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),style:{background:`url(${N("/images/assets/background.webp")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated"},...a,children:n})]}));Wn.displayName=we.displayName;const fe=({className:t,...n})=>e("div",{className:f("flex flex-col space-y-1.5 text-center sm:text-left",t),...n});fe.displayName="DialogHeader";const se=({className:t,...n})=>e("div",{className:f("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});se.displayName="DialogFooter";const oe=G(({className:t,...n},a)=>e(at,{ref:a,className:f("text-lg font-semibold leading-none tracking-tight",t),...n}));oe.displayName=at.displayName;const ve=G(({className:t,...n},a)=>e(rt,{ref:a,className:f("text-sm text-muted-foreground",t),...n}));ve.displayName=rt.displayName;const Vn={0:N("/images/numbers/0.webp"),1:N("/images/numbers/1.webp"),2:N("/images/numbers/2.webp"),3:N("/images/numbers/3.webp"),4:N("/images/numbers/4.webp"),5:N("/images/numbers/5.webp"),6:N("/images/numbers/6.webp"),7:N("/images/numbers/7.webp"),8:N("/images/numbers/8.webp"),9:N("/images/numbers/9.webp")};function Je({number:t,props:n,width:a=7,height:r=8}){const s=Math.max(Math.min(9,t),0),o=Vn[s];return e("img",{src:o,alt:`${s}`,...n,width:a,height:r,style:{imageRendering:"pixelated",...n!=null&&n.style?n.style:{}}})}function U({numbers:t,width:n,height:a,props:r,hiddenNumbers:s}){const o=w(()=>String(t),[t]),i=w(()=>o.length<4?4-o.length:0,[o]);return e("div",{className:f("flex gap-[1px] select-none pointer-events-none",`h-[${a}px]`),children:[i>0&&s&&Array.from({length:i}).map(()=>e(Je,{number:0,width:n,height:a,props:{...r,style:{opacity:"0"}}})),o.split("").map(l=>e(Je,{number:Number(l),width:n,height:a,props:r}))]})}function Jn(t,n,a){var o,i,l,c;if(!((o=n.fusions)!=null&&o.length||(i=n==null?void 0:n.equips)!=null&&i.length))return null;const r=(l=n.fusions)==null?void 0:l.find(p=>p[0]===a.id);if(!r)return n.cardType===R.MONSTER&&a.cardType!==R.MONSTER&&(c=n.equips)!=null&&c.find(p=>p===a.id)?n:null;const s=t(r[1]);return s||(console.error(`Internal Error: Card '${s}' was not found!`),null)}function Qn(t,n){if(n.length<2)return console.error("Can't fusion only one card!"),[];const a=[];let r=n[0];for(let s=1;s<n.length;s++){const o=n[s],i=Jn(t,r,o);i?r=i:r.cardType!==R.MONSTER&&o.cardType===R.MONSTER?r=o:r.cardType===R.MONSTER&&o.cardType!==R.MONSTER||(r=o),a.push({success:!!i,result:r})}return a}function Kn(t,n){const a=[],r=t.map((s,o)=>({card:s,index:o})).sort((s,o)=>s.card.cardType===R.MONSTER&&o.card.cardType!==R.MONSTER?-1:s.card.cardType!==R.MONSTER&&o.card.cardType===R.MONSTER?1:0);for(let s=0;s<r.length;s++){const o=[r[s].index],i=[];let l=r[s].card;e:for(let c=0;c<r.length;c++){if(o.includes(r[c].index))continue;const p=r[c].card;for(const[d,u]of l.fusions??[])if(d===p.id){const h=n(u);if(!h){console.error("Internal error: card was not found!",d);continue}o.push(r[c].index),l=h,i.push(h);continue e}for(const d of l.equips??[])if(d===p.id){const u=n(d);if(!u){console.error("Internal error: card was not found!",d);continue}let h=u.modificationValue??0;i.length>0&&i[i.length-1].addition&&(h+=i[i.length-1].addition);const m=l==null?void 0:l.attack,g=l==null?void 0:l.attack,x=m?m+h:void 0,k=g?g+h:void 0;o.push(r[c].index),i.push({...l,attack:x,defense:k,addition:h});continue e}}o.length<=1||a.push({line:o,resultsId:i})}return a}function ee(...t){const n=j(),a=t.map(r=>({...r,timestamp:Date.now()}));n.simulator.groups=[...n.simulator.groups,...a.filter(r=>!n.simulator.groups.includes(r)).map(r=>({id:r.id,timestamp:Date.now()}))],localStorage.setItem(A,JSON.stringify(n)),D()}function te(...t){const n=j();n.simulator.groups=n.simulator.groups.filter(a=>!t.some(r=>r.id===a.id)),localStorage.setItem(A,JSON.stringify(n)),D()}function _(){const{simulator:t,toggleSpeed:n,togglePrediction:a,isPredictionEnabled:r}=q(),{hand:s,setHand:o,cards:i,setCards:l,resets:c,setResets:p}=me(wt),d=w(()=>s.map((y,v)=>({...y,index:v})).filter(y=>y.priority).sort((y,v)=>y.priority-v.priority),[s]),u=S(y=>{o(s.map(v=>({...v,focus:!1})).map((v,C)=>C===y?{...v,focus:!0}:v))},[o,s]),h=w(()=>{const y=s.find(v=>v.focus);if(!(s.length<1))return y||(u(0),s[0])},[s]),m=w(()=>{const y=s.findIndex(v=>v.focus);if(!(s.length<1))return y<0?(u(0),0):y},[s]),g=S(()=>{o(Pe(i)),p(c+1)},[l,Pe,i,c,p]),x=S(()=>{p(0),g()},[g]),k=S(()=>{const y=s.findIndex(P=>P.focus),v=s[y];if(!v)return;const C=[...s];if(v.priority)C[y]={...C[y],priority:void 0},C.filter(z=>z.priority).sort((z,O)=>(z.priority??0)-(O.priority??0)).forEach((z,O)=>{z.priority=O+1});else{const P=s.filter(z=>z.priority!==void 0).length+1;C[y]={...C[y],priority:P}}o(C)},[s,o]),b=S(y=>{t.groups.length<=1||te(y)},[te,t]);return{hand:s,setCards:l,resetHand:g,selectHandCard:k,init:x,unselectPool:b,focusCard:h,focusCardIndex:m,setFocusCard:u,queueCards:d,toggleSpeed:n,togglePrediction:a,speed:t.settings.speed,resets:c,isPredictionEnabled:r}}function Yn(){const{speed:t}=_(),n=S(o=>o/(t??1),[t]),a=S(o=>{const i=o.map(l=>document.getElementById(de(l.id,l.index))).filter(l=>!!l);return i.forEach(l=>{l&&(l.style.opacity="0")}),i},[]),r=S((o,i,l,c,p,d)=>new Promise((u,h)=>{const m=document.getElementById(de(o.id,o.index)),g=document.getElementById(de(i.id,i.index));if(!m||!g){console.error("Elements have not found!"),h("Error!");return}const x=l.map(X=>document.getElementById(de(X.id,X.index)));function k(){x.forEach(X=>{X.style.filter=""}),m.style.animation="",g.style.animation="",m.style.boxShadow="",g.style.boxShadow="",u([m,g])}x.forEach(X=>{X.style.filter="brightness(0.5)"}),m.style.animation="cardFusionShadowChange 1.5s infinite",g.style.animation="cardFusionShadowChange 1.5s infinite";let b=0;function y(){b<n(80)?(b+=1,requestAnimationFrame(y)):(m.style.animation="",g.style.animation="",c?C():P())}let v=0;function C(){v<n(260)?(v+=3,m.style.boxShadow="0 0 10px 5px green",g.style.boxShadow="0 0 10px 5px green",requestAnimationFrame(C)):O()}function P(){v<n(220)?(v+=3,m.style.filter=`sepia(${v/100})`,g.style.filter=`sepia(${v/100})`,m.style.boxShadow="0 0 10px 5px red",g.style.boxShadow="0 0 10px 5px red",requestAnimationFrame(P)):O()}let z=0;function O(){z<n(40)?(z+=1,requestAnimationFrame(P)):(p(),qe())}let T=100;function qe(){T>0?(T-=6*(t??1),d&&(m.style.opacity=`${T}%`),g.style.opacity=`${T}%`,requestAnimationFrame(qe)):(m.style.filter="",g.style.filter="",k())}y()}),[t]),s=S((...o)=>{o.forEach(i=>{i.style.opacity="",i.style.animation=""})},[]);return{animate:r,clearCards:s,moveOutUsedCards:a}}function V(){const{fusing:t,index:n,queueFusions:a,setFusing:r,setIndex:s,setQueueFusions:o,reset:i}=me(Ct),{animate:l,moveOutUsedCards:c,clearCards:p}=Yn(),{queueCards:d,hand:u,init:h}=_(),{findCardById:m}=H(),g=S(()=>{if(t)return;if(d.length<2){console.error("At least two cards are needed for fusing");return}const x=Qn(m,d);o(x),r(!0);const k=document.getElementById("fuse-button");k.style.opacity="0",(async()=>{let b=0,y=d[b++];const v=[];for(let C=0;C<x.length;C++){const P=x[C];let z=d[b++];v.push(...c(u.map((O,T)=>({...O,index:T})).filter(O=>!O.priority))),v.push(...await l(y,z,u.map((O,T)=>({...O,index:T})).filter((O,T)=>y.id!==O.id&&y.index!==T&&z.id!==O.id&&z.index!==T),P.success,()=>{if(s(C),y.cardType===R.MONSTER&&z.cardType===R.EQUIP&&P.success){const O=z.modificationValue??0,T=P.result;T.attack&&!(T!=null&&T.originalAttack)&&(T.originalAttack=T.attack),T.defense&&!(T!=null&&T.originalDefense)&&(T.originalDefense=T.defense),T.attack+=O,T.defense+=O}},C===0)),y={...P.result,index:-1}}await new Promise(C=>setTimeout(C,2200)),p(...v),x.map(C=>C.result).forEach(C=>{if(C.cardType===R.MONSTER){const P=C;P.originalAttack&&(P.attack=P.originalAttack),P.originalDefense&&(P.defense=P.originalDefense)}}),i(),h(),k.style.opacity="100%"})()},[r,o,s,d,u,t]);return{fusing:t,index:n,queueFusions:a,startFusion:g,setFusing:r}}const Xn=yn,Zn=bn,It=G(({className:t,align:n="center",sideOffset:a=4,...r},s)=>e(st,{ref:s,align:n,sideOffset:a,className:f("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));It.displayName=st.displayName;function Q({id:t,icon:n,attack:a,defense:r,cardType:s}){return e("a",{href:E(`/cards/${t}`),children:e("div",{className:f("relative w-[72px] h-[90px]","hover:drop-shadow-[0_0_10px_rgb(255_225_0_/_40%)] hover:scale-[1.05] transition-all duration-200"),style:{cursor:"pointer",userSelect:"none"},children:[e("img",{className:"absolute z-20",src:Tt[s],alt:"Card frame",width:M.width,height:M.height,style:{imageRendering:"pixelated"}}),e("div",{className:"z-10 absolute",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",top:"0px",imageRendering:"pixelated"},children:e("img",{src:N(n),alt:"Card icon",width:M.width*.85/1.7,height:M.height*.82/1.7,className:"translate-y-[3px]",loading:"lazy"})}),a!==void 0&&e("div",{className:"z-30 absolute",style:{display:"flex",justifyContent:"end",alignItems:"end",width:"100%",height:"100%",right:"8px",bottom:"15px"},children:e(U,{hiddenNumbers:!0,numbers:a,width:11,height:11})}),r!==void 0&&e("div",{className:"z-30 absolute",style:{display:"flex",justifyContent:"end",alignItems:"end",width:"100%",height:"100%",right:"8px",bottom:"2px"},children:e(U,{hiddenNumbers:!0,numbers:r,width:11,height:11})})]})})}const Tt={MONSTER:N("/images/cards/frames/monster.webp"),EQUIP:N("/images/cards/frames/equip.webp"),TRAP:N("/images/cards/frames/trap.webp"),RITUAL:N("/images/cards/frames/ritual.webp"),MAGIC:N("/images/cards/frames/magic.webp"),FIELD:N("/images/cards/frames/magic.webp")},M={width:122,height:153},de=(t,n)=>`hand-card-${t}-${n}`;function Le({id:t,icon:n,cardType:a,attack:r,defense:s,focus:o,onClick:i,onHover:l,priority:c,index:p,predictedChannels:d,props:u}){const{fusing:h}=V();return e("div",{id:de(t,p),className:f("relative w-[122px] h-[153px]",!h&&"hover:drop-shadow-[0_0_10px_rgb(255_225_0_/_40%)]",u==null?void 0:u.className),style:{cursor:h?"not-allowed":"pointer",pointerEvents:i?void 0:"none",userSelect:"none",transform:!h&&c?"translate(0, -8%)":void 0,boxShadow:"none"},onClick:()=>!h&&(i==null?void 0:i()),onMouseOver:()=>!h&&(l==null?void 0:l()),children:[d&&e("div",{className:"w-full",children:e("div",{className:"w-full flex justify-between",children:e("div",{className:"absolute z-40 flex justify-between w-full -translate-y-[93%]",children:[d[0]?e(ie,{value:d[0],className:"bg-red-400"}):e("span",{className:"w-6 h-7"}),d[1]?e(ie,{value:d[1],className:"bg-yellow-400"}):e("span",{className:"w-6 h-7"}),d[2]?e(ie,{value:d[2],className:"bg-blue-400"}):e("span",{className:"w-6 h-7"}),d[3]?e(ie,{value:d[3],className:"bg-white"}):e("span",{className:"w-6 h-7"}),d[4]?e(ie,{value:d[4],className:"bg-purple-400"}):e("span",{className:"w-6 h-7"})]})})}),!h&&c&&e("div",{className:"absolute z-40",style:{transform:"translate(-50%, 10%)",left:"21px"},children:e("div",{className:"h-7 w-11 text-center bg-gray-900 text-3xl rounded-sm border-2 border-white text-blue-300",children:e("p",{className:"-translate-y-[5px]",children:c})})}),e("img",{className:"absolute z-20",src:Tt[a],alt:"Card frame",width:M.width,height:M.height,style:{imageRendering:"pixelated"}}),e("div",{className:"z-10 absolute",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",top:"9px",imageRendering:"pixelated"},children:e("img",{src:N(n),alt:"Card icon",width:M.width*.85,height:M.height*.82})}),r!==void 0&&e("div",{className:"z-30 absolute",style:{display:"flex",justifyContent:"end",alignItems:"end",width:"100%",height:"100%",right:"8px",bottom:"26px"},children:e(U,{hiddenNumbers:!0,numbers:r,width:19,height:25})}),s!==void 0&&e("div",{className:"z-30 absolute",style:{display:"flex",justifyContent:"end",alignItems:"end",width:"100%",height:"100%",right:"8px",bottom:"3px"},children:e(U,{hiddenNumbers:!0,numbers:s,width:19,height:25})}),o&&!h&&e("img",{className:"relative z-30",src:E("/images/red_arrow.gif"),width:40,height:30,alt:"Selected arrow",style:{imageRendering:"pixelated",transform:"translate(-28px, 110px)"}})]})}function ie({value:[t,n],className:a}){const r=e("div",{className:f("w-6 h-7 rounded-sm border hover:opacity-40",a),children:e("p",{className:"text-black text-center text-xl",children:t})});return t>1?e(Xn,{openDelay:0,closeDelay:0,children:[e(Zn,{children:r}),e(It,{className:f("pointer-events-none p-2 -translate-y-[140px] bg-transparent shadow-none flex items-center justify-center w-min",a),children:n&&e(Q,{...n})})]}):r}function ea({source:t,target:n,result:a,columnMode:r}){const s=w(()=>n.cardType===R.EQUIP?n.modificationValue??0:0,[n]),o=w(()=>{if(a.cardType===R.MONSTER)return a.attack+s},[s,a]),i=w(()=>{if(a.cardType===R.MONSTER)return a.defense+s},[s,a]);return e("div",{className:f("flex text-white items-center text-6xl gap-1",r&&"flex-col text-xl"),children:[e(Q,{...t}),e("p",{children:"+"}),e(Q,{...n}),e("p",{children:"="}),e(Q,{...a,attack:o,defense:i})]})}function Be(){const[t,n]=I(0),a=S(()=>{const r=document.createElement("div");r.style.width="100px",r.style.height="100px",r.style.overflow="scroll",r.style.position="absolute",r.style.opacity="0",r.style.top="-9999px",document.body.appendChild(r);const s=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),s},[]);return B(()=>{const r=()=>{n(a())};return n(a()),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}function Pt({fusions:t,card:n,fusionsContainerProps:a,maxHeight:r=350,equips:s,reverse:o,title:i}){const{findCardById:l}=H(),c=w(()=>{const b=[];for(const[y,v]of t){const C=l(y),P=l(v);!C||!P||b.push([C,P])}if(!o)for(const y of s??[]){const v=l(y);v&&b.push([v,n])}return b},[t,o]),p=pe(null),[d,u]=I(-1);B(()=>{if(!p.current)return;const b=()=>{p.current&&u(p.current.getBoundingClientRect().width)},y=new ResizeObserver(b);return y.observe(p.current),b(),()=>y.disconnect()},[]);const h=w(()=>d-30,[d]),{columns:m,columnMode:g}=w(()=>d?d<180?{columns:1,columnMode:!0}:d<320?{columns:2,columnMode:!0}:d<383?{columns:1}:d<645?{columns:1}:d<920?{columns:2}:{columns:3}:{columns:3},[d]),x=w(()=>Math.min(r,(g?380:103)*Math.ceil(c.length/m)+12),[r,g,c,m]),k=Be();return e("div",{ref:p,children:[i(c.length),e("span",{className:"h-4"}),d&&d>0?e(Oe,{height:x,columnWidth:h/m,rowHeight:g?380:103,columnCount:m,rowCount:Math.ceil(c.length/m),width:h+k,className:f("m-auto bg-[#080106] border-t-2 border-white",a==null?void 0:a.className),style:{overflowY:"scroll",overflowX:"hidden",marginTop:"15px",marginBottom:"15px"},children:({columnIndex:b,rowIndex:y,style:v})=>{const C=y*m+b;if(c.length<=C)return null;const[P,z]=c[C];return e("div",{style:{...v,marginTop:y===0?"5px":void 0},className:"flex items-center justify-center",children:e(ea,{columnMode:g,source:o?z:n,target:P,result:o?n:z})},`${b}-${y}`)}}):e($,{children:e("div",{className:"flex justify-center my-4",children:e(Et,{})})})]})}function ta(t){const{card:n}=t,{cards:a}=H(),r=w(()=>{const s=n.id;return a.reduce((o,i)=>{for(const[l,c]of i.fusions??[])if(c===s){const p=l;o.push([i.id,p])}return o},[])},[a,n]);return r.length?e(Pt,{title:()=>e("p",{className:"text-center text-3xl text-white",children:["RECIPE (",r.length,")"]}),reverse:!0,fusions:r,...t}):e($,{})}function zt({focusCard:t,fusionsContainerProps:n,height:a}){var d,u,h,m;const{id:r,name:s,description:o,price:i,password:l,groups:c}=t,{level:p}=t||{};return e($,{children:[e(fe,{children:e(oe,{children:[p&&p>1?e("div",{className:"flex gap-0.5 justify-center mb-2",children:Array.from({length:p}).map((g,x)=>e("img",{src:N("/images/assets/star.webp"),alt:"Type icon",width:"22px",height:"22px",style:{imageRendering:"pixelated"}},x))}):e("div",{className:"h-[22px]"}),e("div",{className:"flex gap-2 overflow-hidden font-light justify-between bg-[#080106] px-3 py-2 mt-2 rounded-[4px] shadow-lg shadow-gray-950",children:[e("p",{className:"text-3xl text-red-300",children:r}),e("p",{className:"text-3xl text-slate-300 text-nowrap",children:s}),t.cardType===R.MONSTER?e("img",{src:N(`/images/types/${t.type.toLowerCase()}.webp`),alt:"Type icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"}}):e("img",{src:N(t.cardType===R.TRAP?"/images/types/fiend.webp":t.cardType===R.FIELD?"/images/types/aqua.webp":t.cardType===R.EQUIP?"/images/types/warrior.webp":t.cardType===R.MAGIC?"/images/types/spellcaster.webp":t.cardType===R.RITUAL?"/images/types/zombie.webp":"/images/types/spellcaster.webp"),alt:"Type icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"}})]})]})}),e("div",{className:"flex gap-4 mt-4 h-fit max-[420px]:flex-col max-[420px]:items-center max-[420px]:mb-4",children:[e("div",{className:"h-fit",children:[e(Le,{...t,index:-2,priority:void 0,focus:!1}),e("div",{className:"flex gap-1 justify-center mt-1 items-center",children:t.cardType===R.MONSTER?e($,{children:[e("img",{src:N(`/images/guardians/${t.guardians[0].toLowerCase()}.webp`),alt:"Guardian icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"}}),e("img",{src:N(`/images/guardians/${t.guardians[1].toLowerCase()}.webp`),alt:"Guardian icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"}})]}):e($,{})})]}),e("div",{className:"h-fit w-full",children:[e("p",{className:"text-3xl text-white bg-[#080106] px-4 py-2 overflow-hidden h-36 mt-0.5 border-l-2 overflow-y-auto max-[600px]:text-xl",style:{borderRadius:"4px"},children:o}),e("p",{className:"text-gray-300 text-lg text-center",children:c.map(g=>g).join(", ")})]})]}),(!!((d=t.fusions)!=null&&d.length)||!!((u=t==null?void 0:t.equips)!=null&&u.length))&&e(Pt,{card:t,fusions:t.fusions??[],fusionsContainerProps:n,maxHeight:a,equips:(t==null?void 0:t.equips)??[],title:g=>e("p",{className:"text-center text-3xl text-white",children:["FUSIONS & EQUIPMENTS (",g,")"]})}),(!!((h=t.fusions)!=null&&h.length)||!!((m=t==null?void 0:t.equips)!=null&&m.length))&&e(ta,{card:t,fusionsContainerProps:n,maxHeight:a,equips:(t==null?void 0:t.equips)??[]}),e(se,{children:l&&i&&e("div",{className:"flex justify-between items-end w-full gap-3",children:[e("div",{children:e(U,{numbers:Number(i),width:19,height:19})}),e("div",{children:e(U,{numbers:Number(l),width:19,height:19})})]})})]})}function ze(t){return t.toString().padStart(3,"0")}function $e(t){return encodeURIComponent(t.replace("#","_"))}function na(t){return t.replace("_","#")}function aa(){const[{matches:{id:t}}]=L(),{findCardById:n,findCardByName:a}=H(),r=w(()=>na(t),[t]),s=w(()=>{let o=n(r);return o||(o=a(r)),o||null},[n,r]);return s?e($,{children:[e(Y,{titlePrefix:`${s.id} ${s.name}`,description:s.description,keywords:`${s.name}, stats, all fusions, equips, recipe, ${s.id}`}),e("main",{children:e(ae,{children:e("div",{style:{background:`url(${N("/images/assets/background.webp")})`,backgroundSize:"cover"},className:"max-w-[1040px] m-auto px-2.5 py-2 rounded-lg box-shadow",children:e(zt,{focusCard:s,fusionsContainerProps:{className:"h-max mb-2 flex flex-wrap"},height:800})})})})]}):e(De,{})}function xe({className:t,...n}){return e("div",{"data-slot":"card",className:f("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t,"bg-gradient-to-b from-gradient-one via-gradient-two to-gradient-three"),...n})}function Ne({className:t,...n}){return e("div",{"data-slot":"card-header",className:f("flex flex-col gap-1.5 px-6",t),...n})}function ke({className:t,...n}){return e("div",{"data-slot":"card-title",className:f("leading-none font-semibold",t),...n})}function be({className:t,...n}){return e("div",{"data-slot":"card-content",className:f("px-6",t),...n})}function $t({className:t,type:n,...a}){return e("input",{type:n,"data-slot":"input",className:f("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}const Ot=Ke("cursor-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),F=G(({className:t,variant:n,size:a,asChild:r=!1,...s},o)=>e(r?ot:"button",{className:f(Ot({variant:n,size:a,className:t})),ref:o,role:"button",...s}));F.displayName="Button";function Gt({checked:t,setChecked:n}){const a=w(()=>`switch-component-${ge()}`,[]);return e("div",{class:"relative inline-block w-11 h-5",children:e("form",{children:[e("input",{id:a,checked:t,type:"checkbox",class:"peer appearance-none w-11 h-6 bg-gradient-three rounded-full checked:bg-gradient-three cursor-pointer transition-colors duration-300",onChange:r=>{var s;return n((s=r.target)==null?void 0:s.checked)},"aria-label":"Switch button"}),e("label",{for:a,class:"absolute top-0 left-0 w-6 h-6 bg-secondary rounded-full border shadow-sm transition-transform duration-300 peer-checked:translate-x-6 peer-checked:bg-active cursor-pointer"})]})})}function ra({...t}){return e(kn,{"data-slot":"popover",...t})}function sa({...t}){return e(wn,{"data-slot":"popover-trigger",...t})}function oa({className:t,align:n="center",sideOffset:a=4,...r}){return e(Nn,{children:e(vn,{"data-slot":"popover-content",align:n,sideOffset:a,className:f("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",t),...r})})}function ia({className:t,...n}){return e(ne,{"data-slot":"command",className:f("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...n})}function la({className:t,...n}){return e("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e(en,{className:"size-4 shrink-0 opacity-50"}),e(ne.Input,{"data-slot":"command-input",className:f("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...n})]})}function da({className:t,...n}){return e(ne.List,{"data-slot":"command-list",className:f("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...n})}function ca({...t}){return e(ne.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function ua({className:t,...n}){return e(ne.Group,{"data-slot":"command-group",className:f("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...n})}function Qe({className:t,...n}){return e(ne.Item,{"data-slot":"command-item",className:f("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function Ft({children:t,clickType:n="anchor",onSelect:a,cards:r}){const[s,o]=I(!1),[i,l]=I(""),{cards:c}=r?{cards:r}:W(),p=w(()=>c.map(x=>({value:x.name,label:x.name})),[r]),d=pe(null),[u,h]=I(-1);B(()=>{if(!d.current)return;const x=()=>{d.current&&h(d.current.getBoundingClientRect().width)},k=new ResizeObserver(x);return k.observe(d.current),x(),()=>k.disconnect()},[]);const m=w(()=>{const x=p.filter(k=>k.value.toLowerCase().includes(i.toLowerCase()));return i!=null&&i.length?x.splice(0,30):x},[i]),g=S(x=>{x||l(""),o(x)},[o]);return e(ra,{open:s,onOpenChange:g,children:[e(sa,{asChild:!0,children:t||e(F,{variant:"secondary",role:"combobox","aria-expanded":s,className:"text-white group w-[374px] max-[731px]:w-[250px] max-[600px]:w-[150px] max-[500px]:w-[125px] max-[295px]:w-[75px] max-[205px]:w-[55px] max-[200px]:w-[100%] justify-between","aria-label":"Search cards",ref:d,children:[e("p",{className:"w-inherit overflow-hidden",children:"Search card..."}),e(tn,{className:"opacity-50"})]})}),e(oa,{className:`w-[${u}px] p-0 m-0"`,children:e(ia,{children:[e(la,{placeholder:"Search card...",className:f("h-9"),onValueChange:x=>{l(x)},width:u/4,style:{width:u/2}}),e(da,{children:[e(ca,{style:{width:u},children:"No card found."}),e(ua,{className:`!w-[${u}px]`,children:i?m.map((x,k)=>{const b=e(Qe,{id:`command-item-${k}`,value:x.value,onSelect:()=>{g(!1),a==null||a(x.value)},className:"flex justify-between group text-lg text-nowrap overflow-hidden",children:[e("p",{class:"w-full overflow-hidden",children:x.label}),e("p",{className:"tabular-nums text-xl text-white group-data-[selected=true]:text-black",children:ze(p.indexOf(x)+1)})]},k);return n==="anchor"?e("a",{href:E(`/cards/${$e(x.value)}`),children:b}):b}):e(Yt,{width:u-6,height:240,itemSize:40,itemCount:m.length,children:({index:x,style:k})=>{const b=m[x],y=e(Qe,{id:`command-item-${x}`,value:b.value,onSelect:()=>{g(!1),a==null||a(b.value)},style:k,className:"flex justify-between group text-lg text-nowrap overflow-hidden",children:[e("p",{class:"w-full overflow-hidden",children:b.label}),e("p",{className:"tabular-nums text-xl text-white group-data-[selected=true]:text-black",children:ze(p.indexOf(b)+1)})]},x);return n==="anchor"?e("a",{href:E(`/cards/${$e(b.value)}`),children:y}):y}})})]})]})})]})}function ma({onAdd:t}){return e(Ft,{clickType:"custom",onSelect:t,children:e(F,{className:"flex bg-accent-foreground h-[90px] w-[72px] text-border text-3xl border rounded-sm hover:text-gradient-one hover:opacity-90 hover:bg-background hover:scale-[1.05] transition-all cursor-pointer focus:border-active","aria-label":"Add card to group button",children:e("p",{className:"m-auto",children:"+"})})})}const pa=Sn,ga=En,ha=G(({className:t,inset:n,children:a,...r},s)=>e(it,{ref:s,className:f("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",t),...r,children:[a,e(Ge,{className:"ml-auto h-4 w-4"})]}));ha.displayName=it.displayName;const fa=G(({className:t,...n},a)=>e(lt,{ref:a,className:f("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));fa.displayName=lt.displayName;const At=G(({className:t,...n},a)=>e(Cn,{children:e(dt,{ref:a,className:f("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));At.displayName=dt.displayName;const Mt=G(({className:t,inset:n,...a},r)=>e(ct,{ref:r,className:f("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",t),...a}));Mt.displayName=ct.displayName;const xa=G(({className:t,children:n,checked:a,...r},s)=>e(mt,{ref:s,className:f("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...r,children:[e("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e(ut,{children:e(nn,{className:"h-4 w-4"})})}),n]}));xa.displayName=mt.displayName;const ba=G(({className:t,children:n,...a},r)=>e(pt,{ref:r,className:f("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e(ut,{children:e(an,{className:"h-4 w-4 fill-current"})})}),n]}));ba.displayName=pt.displayName;const ya=G(({className:t,inset:n,...a},r)=>e(gt,{ref:r,className:f("px-2 py-1.5 text-sm font-semibold text-foreground",n&&"pl-8",t),...a}));ya.displayName=gt.displayName;const wa=G(({className:t,...n},a)=>e(ht,{ref:a,className:f("-mx-1 my-1 h-px bg-border",t),...n}));wa.displayName=ht.displayName;function Dt({children:t,group:n}){const[a,r]=I(!1),s=w(()=>JSON.stringify({id:n.id,cards:n.cards,name:n.name}),[n]),o=S(()=>{navigator.clipboard.writeText(s).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(i=>{console.error("Failed to copy text: ",i)})},[s]);return e(ae,{children:[e(he,{asChild:!0,children:t}),e(re,{className:"rounded-2xl",children:[e(fe,{children:[e(oe,{className:"font-light text-2xl",children:"Group code"}),e(ve,{className:"text-lg text-gray-200",children:"Share your group by copying the code and importing it using the import button at the group section in home page."})]}),e("pre",{className:"overflow-y-auto max-h-[40vh] bg-gradient-one border text-sm p-4 rounded overflow-x-auto whitespace-pre-wrap break-words",children:e("code",{children:s})}),e(se,{children:e(F,{className:"w-full",disabled:a,onClick:()=>o(),children:"COPY"})})]})]})}function _t({id:t,name:n}){const[a,r]=I(!1);return e(ae,{open:a,onOpenChange:r,children:[e(he,{asChild:!0,children:e(F,{variant:"outline","aria-label":"Remove group",children:e(Ze,{})})}),e(re,{children:[e(fe,{className:"mb-4",children:[e(oe,{className:"font-light text-3xl",children:"Are you sure?"}),e(ve,{className:"font-light text-lg text-gray-200",children:['This action cannot be undone. This will permanently delete your group "',n,'".']})]}),e(se,{children:[e(F,{variant:"secondary",onClick:()=>r(!1),className:"w-full",children:"Cancel"}),e(F,{variant:"destructive",onClick:()=>Tn(t),className:"w-full",children:"Delete"})]})]})]})}function va({group:t}){const{id:n,name:a,cards:r,editable:s}=t,{findCardById:o,findCardByName:i}=H(),[l,c]=I(!1),p=w(()=>r.map(b=>o(b)),[r]),{simulator:{groups:d}}=q(),u=w(()=>d.some(b=>b.id===n),[d]),[,h]=L(),m=S(()=>{ee(t);const b=document.getElementById("groups-section");b&&(h("?page=1"),b.scrollIntoView({behavior:"smooth",block:"start"}))},[h,ee,n]),[g,x]=I(t.name),k=S(b=>i(b),[]);return e(xe,{className:u?"bg-card border-active box-shadow-accent":"bg-background",children:[e(Ne,{children:e(ke,{className:f("relative flex items-center gap-4 border-b-2 pb-4 animate-in animate-bounce font-light max-[435px]:flex-col",u&&"border-active"),children:[l?e($t,{defaultValue:a,onChange:b=>{var y;return x((y=b.target)==null?void 0:y.value)},className:"w-fit"}):e("p",{className:"text-xl uppercase transition-all",children:[a," (",p.length,")"]}),s&&e("div",{className:"flex gap-1",children:[e(F,{variant:"outline",onClick:()=>{l?(bt({id:n,name:g??t.name}),c(!1)):c(!0)},"aria-label":"Edit name",className:f(l&&(((g==null?void 0:g.length)??0)>0?"bg-green-800":"bg-red-800")),disabled:((g==null?void 0:g.length)??0)<=0,children:e(et,{})}),e(Dt,{group:t,children:e(F,{variant:"outline","aria-label":"Export group",children:e(tt,{})})}),e(_t,{...t})]}),e("div",{className:"absolute transform max-[331px]:translate-x-[100%] max-[331px]:static max-[331px]:translate-y-[120%]",style:{left:"100%",transform:"translate(-100%,-100%)",top:"50%"},children:e(Gt,{checked:u,setChecked:()=>u?te(t):m()})})]})}),e(be,{className:"grid grid-cols-11 gap-2 max-[1040px]:grid-cols-10 max-[970px]:grid-cols-9 max-[785px]:grid-cols-8 max-[700px]:grid-cols-7 max-[615px]:grid-cols-6 max-[530px]:grid-cols-5 max-[451px]:grid-cols-4 max-[380px]:grid-cols-3 max-[305px]:grid-cols-2 max-[234px]:grid-cols-1 m-auto",children:[p.map((b,y)=>{const v=e(Q,{...b},`${b}-${y}`);return s?e(pa,{children:[e(ga,{children:v}),e(At,{children:e(Mt,{className:"flex gap-2 items-center cursor-pointer",onClick:()=>zn(n,b),children:[e(Ze,{}),e("p",{children:"Remove"})]})})]}):v}),s?e(ma,{onAdd:b=>{const y=k(b);y&&Pn(t.id,y)}}):e($,{})]})]})}function Na(){const[{matches:{id:t}}]=L();if(!t)return e($,{});const{groups:n}=q(),{groups:a}=W(),r=w(()=>[...n.map(o=>({...o,editable:!0})),...a],[n,a]),s=w(()=>r.find(o=>o.id===t),[r]);return s?e($,{children:[e(Y,{titlePrefix:`${s.name}`,description:`A group of ${s.cards.length} cards`,keywords:s.cards.map(o=>`card-[${o}]`).join(",").slice(0,200)}),e("main",{className:"!max-w-[960px]",children:e(va,{group:s})})]}):e(De,{})}function ka(){const[,t]=L(),n=S(()=>{const a=He();t(E(`/groups/${a.id}`))},[He,t]);return e(F,{className:"w-full h-full py-6 bg-card hover:bg-background  border border-foreground",onClick:()=>n(),"aria-label":"Add group button",children:e(rn,{className:"!w-8 !h-8 text-active"})})}function Ca({className:t,...n}){return e("textarea",{"data-slot":"textarea",className:f("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}function Sa(){const[t,n]=I(!1),[a,r]=I(),[,s]=L(),o=w(()=>{if(!(a!=null&&a.length))return!1;try{const c=JSON.parse(a);return Fe.validateSync(c)}catch{}return!1},[a]),i=S(()=>o?In({...o,id:`shared-${o.id}`}):null,[o]),l=S(c=>{setTimeout(()=>{s(E(`/groups/${c}`))})},[s]);return e(ae,{open:t,onOpenChange:n,children:[e(he,{asChild:!0,children:e(F,{className:"w-full h-full py-6 bg-card hover:bg-background border border-foreground","aria-label":"Import group by code button",children:e(sn,{className:"!w-8 !h-8 text-active"})})}),e(re,{className:f("rounded-2xl",o&&"!border-green-500"),children:[e(fe,{children:[e(oe,{className:"font-light text-2xl",children:"Group code"}),e(ve,{className:"text-lg text-gray-200",children:"Copy and paste here the group code you want to import"})]}),e(Ca,{className:f("overflow-y-auto h-[25vh] max-h-[40vh] bg-gradient-one border text-ms p-4 rounded overflow-x-auto whitespace-pre-wrap break-words",o?"!border-green-500":"!border-red-400"),placeholder:"Paste your code here...",onChange:c=>r(c.target.value),value:a}),e(se,{children:e(F,{className:f("w-full",o&&"bg-green-500"),disabled:!o,onClick:()=>{l(i().id),n(!1)},children:"CREATE"})})]})]})}function Ea({value:t,setValue:n}){return e("input",{id:`checkbox-${ge()}`,type:"checkbox",checked:t,onChange:a=>n(a.currentTarget.checked),class:"w-5 h-5 accent-transparent checked:accent-active rounded-sm cursor-pointer","aria-label":"Check button"})}function Lt(){const{groups:t,simulator:n}=q(),{groups:a}=W(),r=w(()=>[...t,...a],[t,a]),s=w(()=>r.map(d=>({...d,selected:n.groups.some(u=>u.id===d.id)})),[r,n.groups]),o=w(()=>s.filter(d=>d.selected).length,[s]),i=w(()=>s.filter(d=>d.selected).reduce((d,u)=>d+u.cards.length,0),[s]),[l,c]=I(-1);B(()=>{if(!p.current)return;const d=()=>{p.current&&c(p.current.getBoundingClientRect().width)},u=new ResizeObserver(d);return u.observe(p.current),d(),()=>u.disconnect()},[]);const p=pe(null);return e("div",{ref:p,children:e(xe,{children:[e(Ne,{className:"pb-4 border-b-2",children:e(ke,{className:"text-3xl font-light text-center flex gap-3 items-center justify-between",children:[e("p",{children:["Pool (",o,")"]}),e("a",{className:f("flex gap-2 items-center hover:underline hover:text-yellow-200",o<1&&"sepia-100"),href:E("/pool#pool-cards"),children:[e("img",{src:N("/images/cards/frames/small_card.webp"),alt:"Card frame",width:M.width/4,height:M.height/4,style:{imageRendering:"pixelated"}}),e("p",{children:i})]})]})}),e(be,{className:"m-auto",children:e(Bt,{containerWidth:l})})]})})}function Bt({containerWidth:t,anchorTargetBlank:n}){const{groups:a,simulator:r}=q(),{groups:s}=W(),o=w(()=>[...a,...s],[a,s]),i=w(()=>o.map(h=>({...h,selected:r.groups.some(m=>m.id===h.id)})),[o,r.groups]),l=S(h=>{i.some(m=>m.id===h.id&&m.selected)?te(h):ee(h)},[ee,te,i]),c=w(()=>t-55,[t]),p=w(()=>t?t<533?1:t<620?2:3:3,[t]),d=300,u=Be();return e(Oe,{height:d,columnWidth:c/p,rowHeight:42,columnCount:p,rowCount:Math.ceil(i.length/p),width:c+u,style:{overflowY:"scroll",overflowX:"hidden"},children:({columnIndex:h,rowIndex:m,style:g})=>{const x=m*p+h;if(i.length<=x)return null;const k=i[x];return e("div",{className:"flex items-center gap-2 overflow-x-hidden",style:g,children:[e(Ea,{value:i.some(b=>b.id===k.id&&b.selected),setValue:()=>l(k)}),e("a",{href:E(`/groups/${k.id}`),className:"hover:text-yellow-200 text-xl hover:underline",target:n?"_blank":void 0,children:k.name})]})}})}function Ra({group:t}){const{id:n,name:a,cards:r,editable:s}=t,{findCardById:o}=H(),[i,l]=I(!1),c=w(()=>r.map(v=>o(v)),[r]),p=22,d=w(()=>c.length-p,[c]),u=w(()=>d>0,[d]),h=w(()=>u?c.slice(0,p-1):c,[c,u]),{simulator:{groups:m}}=q(),g=w(()=>m.some(v=>v.id===n),[m]),[,x]=L(),k=S(()=>{ee(t);const v=document.getElementById("groups-section");v&&(x("?page=1"),v.scrollIntoView({behavior:"smooth",block:"start"}))},[x,ee,n]),[b,y]=I(t.name);return e(xe,{className:g?"bg-card border-active box-shadow-accent":"bg-background",children:[e(Ne,{children:e(ke,{className:f("relative flex items-center gap-4 border-b-2 pb-4 animate-in animate-bounce font-light max-[435px]:flex-col",g&&"border-active"),children:[i?e($t,{defaultValue:a,onChange:v=>{var C;return y((C=v.target)==null?void 0:C.value)},className:"w-fit"}):e("a",{href:E(`/groups/${n}`),className:"text-xl uppercase hover:text-active transition-all hover:underline",children:[a," (",c.length,")"]}),s&&e("div",{className:"flex gap-1",children:[e(F,{variant:"outline",onClick:()=>{i?(bt({id:n,name:b??t.name}),l(!1)):l(!0)},"aria-label":"Edit name",className:f(i&&(((b==null?void 0:b.length)??0)>0?"bg-green-800":"bg-red-800")),disabled:((b==null?void 0:b.length)??0)<=0,children:e(et,{})}),e(Dt,{group:t,children:e(F,{variant:"outline","aria-label":"Export group",children:e(tt,{})})}),e(_t,{...t})]}),e("div",{className:"absolute transform max-[331px]:translate-x-[100%] max-[331px]:static max-[331px]:translate-y-[120%]",style:{left:"100%",transform:"translate(-100%,-100%)",top:"50%"},children:e(Gt,{checked:g,setChecked:()=>g?te(t):k()})})]})}),e(be,{className:"grid grid-cols-11 gap-2 max-[1040px]:grid-cols-10 max-[970px]:grid-cols-9 max-[785px]:grid-cols-8 max-[700px]:grid-cols-7 max-[615px]:grid-cols-6 max-[530px]:grid-cols-5 max-[451px]:grid-cols-4 max-[380px]:grid-cols-3 max-[305px]:grid-cols-2 max-[234px]:grid-cols-1 m-auto",children:[h.map((v,C)=>e(Q,{...v},`${v}-${C}`)),u&&e("a",{href:E(`/groups/${n}`),children:e("div",{className:"flex bg-slate-600 h-[90px] w-[72px] text-3xl border rounded-sm hover:text-yellow-600 hover:bg-slate-700 hover:scale-[1.05] transition-all cursor-pointer",children:e("p",{className:"m-auto",children:["+",d+1]})})})]})]})}function Ia({className:t,...n}){return e("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:f("mx-auto flex w-full justify-center",t),...n})}function Ta({className:t,...n}){return e("ul",{"data-slot":"pagination-content",className:f("flex flex-row items-center gap-1",t),...n})}function Se({...t}){return e("li",{"data-slot":"pagination-item",...t})}function je({className:t,isActive:n,size:a="icon",...r}){return e("a",{"aria-current":n?"page":void 0,"data-slot":"pagination-link","data-active":n,className:f(Ot({variant:n?"outline":"ghost",size:a}),t),...r})}function Pa({className:t,...n}){return e(je,{"aria-label":"Go to previous page",size:"default",className:f("gap-1 px-2.5 sm:pl-2.5",t),...n,children:[e(on,{}),e("span",{className:"hidden sm:block",children:"Previous"})]})}function za({className:t,...n}){return e(je,{"aria-label":"Go to next page",size:"default",className:f("gap-1 px-2.5 sm:pr-2.5",t),...n,children:[e("span",{className:"hidden sm:block",children:"Next"}),e(Ge,{})]})}function $a(t,n){const[{matches:a},r]=L(),s=w(()=>Math.ceil(t.length/n),[t,n]),o=u=>{const h=new URL(window.location.href);h.searchParams.set("page",u),r(h.pathname+h.search)},i=w(()=>{const u=a==null?void 0:a.page;return u&&!Number.isNaN(Number(u))?Number(u):1},[a]),l=S(()=>{o(String(Math.min(t.length,i+1)))},[i,t]),c=S(()=>{o(String(Math.max(1,i-1)))},[i]),p=S(u=>{o(String(u))},[o]),d=w(()=>{const u=(i-1)*n,h=u+n;return t.slice(u,h)},[i,t]);return{page:i,next:l,previous:c,setPage:p,view:d,allPages:s}}function Oa(){const{groups:t,simulator:n}=q(),{groups:a}=W(),r=w(()=>{const c=[...t.map(p=>({...p,editable:!0})),...a];return c.sort((p,d)=>{var m,g;const u=(m=n.groups.find(x=>x.id===p.id))==null?void 0:m.timestamp,h=(g=n.groups.find(x=>x.id===d.id))==null?void 0:g.timestamp;return u&&h?h-u:u?-1:h?1:0}),c},[t,a]),{view:s,page:o,allPages:i}=$a(r,8),l=S(()=>{const c=document.getElementById("groups-section");c&&c.scrollIntoView({behavior:"smooth",block:"start"})},[]);return e("section",{children:[e("div",{id:"groups-section",className:"flex flex-col gap-4",children:s.map(c=>e(Ra,{group:c},c))}),e("div",{className:"my-4",children:e(xe,{className:"py-2 m-0",children:e(be,{children:e(Ia,{children:e(Ta,{className:"flex-wrap justify-center",children:[e(Se,{className:o<=1?"opacity-45 pointer-events-none":"",children:e(Pa,{onClick:c=>{c.preventDefault(),l()},href:o<2?"":E(`/?page=${o-1}`)})}),Array.from({length:i}).map((c,p)=>e(Se,{className:"peer",children:e(je,{onClick:d=>{d.preventDefault(),l()},isActive:o===p+1,href:E(`/?page=${p+1}`),children:p+1})},p)),e(Se,{className:o>=i?"opacity-45 pointer-events-none":"",children:e(za,{onClick:c=>{c.preventDefault(),l()},href:o>=i?"":E(`/?page=${o+1}`)})})]})})})})})]})}function Ga(){return e($,{children:[e(Y,{titlePrefix:"Home",description:"Manage your groups and pool cards",keywords:"main,management,groups,pool,cards,home"}),e("main",{className:"!max-w-[960px]",children:e("div",{className:"flex flex-col gap-6",children:[e(Lt,{}),e("div",{className:"flex justify-center items-center gap-4",children:[e(Sa,{}),e(ka,{})]}),e(Oa,{})]})})]})}function Fa(){const{groups:t,simulator:n}=q(),{groups:a}=W(),{findCardById:r}=H(),s=w(()=>[...t,...a].map(m=>({...m,cards:m.cards.map(g=>r(g)).filter(g=>!!g)})),[t,a]),o=w(()=>s.filter(m=>n.groups.some(g=>g.id===m.id)).reduce((m,g)=>(m.push(...g.cards),m),[]),[s,n.groups]),i=pe(null),[l,c]=I(-1);B(()=>{if(!i.current)return;const m=()=>{i.current&&c(i.current.getBoundingClientRect().width)},g=new ResizeObserver(m);return g.observe(i.current),m(),()=>g.disconnect()},[]);const p=w(()=>l-55,[l]),d=w(()=>l?l<235?1:l<306?2:l<381?3:l<452?4:l<531?5:l<616?6:l<701?7:l<786||l<805?8:l<900?10:(l<971,11):11,[l]),u=500,h=Be();return e($,{children:[e(Y,{titlePrefix:"Pool",description:"See all cards in your pool",keywords:"pool, cards, total, all, groups"}),e("main",{className:"!max-w-[960px]",children:e("div",{ref:i,className:"flex flex-col gap-4",children:[e(Lt,{}),e(xe,{id:"pool-cards",children:[e(Ne,{children:e(ke,{className:"text-3xl font-light",children:["Cards (",o.length,")"]})}),e(be,{children:e(Oe,{height:u,columnWidth:p/d,rowHeight:94,columnCount:d,rowCount:Math.ceil(o.length/d),width:p+h,style:{overflowY:"scroll"},children:({columnIndex:m,rowIndex:g,style:x})=>{const k=g*d+m;if(o.length<=k)return null;const b=o[k];return e("div",{style:{...x,display:"flex",justifyContent:"center",alignItems:"center"},children:e(Q,{...b},b)})}})})]})]})})]})}function Aa({children:t,...n}){const[a,r]=I(!1);return e("button",{className:`relative px-6 py-3 text-4xl text-slate-200 rounded-lg cursor-pointer shadow-lg shadow-black hover:shadow-orange-300 hover:shadow-md hover:text-orange-200 active:shadow active:text-orange-300 disabled:text-gray-500 disabled:shadow-black disabled:shadow-sm transition-all ${n.class} disabled:cursor-not-allowed p-0`,style:{background:`url(${N("/images/assets/border_top.webp")})`,backgroundPosition:a?"left":"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated",textShadow:"0 0 8px black",transitionDuration:"350ms",userSelect:"none"},onMouseEnter:()=>!n.disabled&&r(!0),onMouseLeave:()=>!n.disabled&&r(!1),...n,children:[e("span",{className:"absolute z-10 inset-0 bg-black opacity-30 rounded-lg",style:{opacity:n.disabled?"70%":a?"50%":void 0,transitionDuration:"350ms",background:n.disabled?"black":void 0}}),e("div",{className:"z-50 relative",children:t})]})}function Ma(t){const{hand:n}=_(),{startFusion:a,fusing:r}=V(),s=w(()=>n.filter(o=>o.priority).length<2||r,[n,r]);return e(Aa,{id:"fuse-button",disabled:s,...t,class:"w-min px-10 text-5xl mb-[1vh] z-0",onClick:()=>a(),"aria-label":"Fuse button",children:"FUSE"})}function Da({className:t,...n}){const{resetHand:a}=_(),{fusing:r}=V();return e(K,{className:f("shadow-xl cursor-pointer group hover:shadow-md text-[30px] py-0",t),"aria-label":"Reset hand cards button",...n,onClick:()=>a(),disabled:r,children:"RESET"})}function jt({children:t,...n}){const[a,r]=I(!1);return e("div",{...n,className:f("flex items-center relative px-6 py-3 text-4xl border-2 border-gray-900 text-slate-200 rounded-lg cursor-pointer shadow-md shadow-black hover:shadow-orange-300 hover:shadow-md hover:text-orange-200 active:shadow active:text-orange-300 disabled:text-gray-500 disabled:shadow-black disabled:shadow-sm transition-all disabled:cursor-not-allowed",n.className??""),style:{background:`url(${N("/images/assets/border_top.webp")})`,backgroundPosition:a?"center":"right",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated",textShadow:"0 0 8px black",transitionDuration:"250ms",userSelect:"none"},onMouseEnter:()=>!n.disabled&&r(!0),onMouseLeave:()=>!n.disabled&&r(!1),children:[e("span",{className:"absolute z-10 inset-0 bg-black opacity-30 border border-white rounded-lg",style:{opacity:n.disabled?"70%":a?"50%":void 0,transitionDuration:"250ms",background:n.disabled?"black":void 0}}),e("div",{className:"z-50 relative",children:t})]})}function _a({className:t,...n}){const[a,r]=I(!1),s=pe(null),[o,i]=I(-1);return B(()=>{if(!s.current)return;const l=()=>{s.current&&i(s.current.getBoundingClientRect().width)},c=new ResizeObserver(l);return c.observe(s.current),l(),()=>{c.disconnect()}},[a]),e(ae,{open:a,onOpenChange:r,children:[e(he,{children:e(jt,{className:f("shadow-xl cursor-pointer group hover:shadow-md m-auto text-[30px] py-0",t),"aria-label":"Open pool menu button",...n,children:"POOL"})}),e(re,{className:"!max-w-[825px]",children:[e(oe,{className:"text-3xl font-light",children:"Pool"}),e("div",{ref:s,className:"flex items-center justify-center bg-accent-foreground rounded-lg border border-x-gradient-two",children:e(Bt,{containerWidth:o,anchorTargetBlank:!0})}),e(se,{children:e(K,{className:"m-auto py-0 px-2",onClick:()=>r(!1),children:"Back"})})]})]})}function La(){return e("img",{className:"shadow-lg shadow-black -z-10",src:N("/images/cards/frames/unknown.webp"),alt:"Unknown card",width:M.width,height:M.height,style:{imageRendering:"pixelated",filter:"sepia(1)",opacity:"30%"}})}function Ba(){const{queueFusions:t,index:n}=V();if(n===-1||!t[n])return e(La,{});const a=t[n].result;return e(Le,{...a,index:-1})}function ja({className:t,...n}){const{focusCard:a}=_();return e(ae,{children:[e(he,{children:e(jt,{disabled:!a,className:f("shadow-xl cursor-pointer group hover:shadow-md m-auto text-[30px] py-0",t),"aria-label":"Card stats button",...n,children:"STATS"})}),e(re,{className:"h-[90vh] max-w-[825px] w-full pb-2 pt-3 overflow-y-auto",children:a&&e(zt,{focusCard:a})})]})}function qa({...t}){return e("a",{href:E("/"),children:e(K,{"aria-label":"Back button",...t,className:"max-[527px]:w-[60px] flex justify-center",children:e(ln,{className:"m-auto"})})})}function Ha({className:t,iconClassName:n}){const{toggleSpeed:a,speed:r}=_(),s=w(()=>r!==1,[r]);return e(K,{className:f("m-0 p-2 px-4",s&&"border-2 border-yellow-400 text-yellow-400 shadow-2xl",t),onClick:()=>a(),"aria-label":"Speed up fusions animations button",children:s?e(dn,{className:n}):e(Ge,{className:n})})}function Ua(){const{hand:t}=_(),{queueFusions:n,index:a,fusing:r}=V(),s=w(()=>t.filter(o=>!!o.priority).length-1,[t]);return e("div",{class:"flex gap-4 justify-center mb-2",children:Array.from({length:Me-1}).map((o,i)=>e("div",{className:f("w-6 h-6 rounded-sm bg-gradient-to-bl from-gray-600 to-slate-800 0 shadow-black shadow-sm border-slate-500 opacity-60",s>i&&"from-gray-800 to-slate-900 opacity-55",r&&a>=i?n[i].success?"from-green-600 to-green-800 border-green-500 opacity-45":"from-rose-950 to-red-800 border-red-500 opacity-45":"")},i))})}function Wa(){const{togglePrediction:t,isPredictionEnabled:n}=_();return e(K,{className:f("m-0 p-2 px-4",n&&"border-2 border-yellow-400 text-yellow-400 shadow-2xl max-[527px]:w-[79.56px]"),onClick:()=>t(),"aria-label":"Speed up fusions animations button",children:n?e(cn,{className:"m-auto"}):e(un,{className:"m-auto"})})}function Va(){const{focusCardIndex:t,focusCard:n,setFocusCard:a,hand:r,selectHandCard:s,resets:o}=_(),{findCardById:i}=H(),{fusing:l}=V(),{isPredictionEnabled:c}=_(),p=w(()=>{var h;if(!c)return null;const d=Kn(r,i),u=[];for(let m=0;m<r.length;m++){const g=[];for(let x=0;x<d.length;x++){const k=d[x];k.line.includes(m)&&(g[x]=[k.line.indexOf(m)+1,(h=k.resultsId)==null?void 0:h[k.line.indexOf(m)-1]])}u[m]=g}return u},[o,i,c]);return e("div",{class:"h-[100vh] flex flex-col pixelated-font",children:[e("div",{class:"z-10 flex flex-col gap-4 justify-center py-2 px-4 max-[527px]:py-0",style:{background:`url(${N("/images/assets/border_top.webp")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated"},children:e("div",{className:"flex justify-between items-center max-[527px]:flex-col",children:[e("div",{class:"flex gap-4 max-[527px]:justify-between max-[527px]:w-full",children:[e(qa,{className:"w-min max-[718px]:px-3 max-[718px]:h-13"}),e(_a,{className:"w-min max-[718px]:px-3 max-[718px]:h-13 max-[718px]:text-2xl py-0.5"}),e(Ha,{className:"w-min max-[718px]:px-3 max-[718px]:h-13",iconClassName:"size-8"})]}),e("div",{class:"flex gap-4 max-[527px]:justify-between max-[527px]:w-full",children:[e(Wa,{}),e(ja,{className:"w-min max-[718px]:px-3 max-[718px]:h-13 max-[718px]:text-2xl py-0.5"}),e(Da,{className:"w-min max-[718px]:px-3 max-[718px]:h-13 max-[718px]:text-2xl py-0.5"})]})]})}),e("div",{className:"z-10 flex flex-col justify-between h-full items-center",style:{background:`url(${N("/images/assets/background.webp")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",imageRendering:"pixelated"},children:[l&&e("div",{className:"-z-0 absolute w-[100vw] h-[100vh] top-0 left-0 right-0 bottom-0 bg-black opacity-50"}),e("div",{class:"relative flex flex-col gap-4 justify-end h-full pb-2",children:e("div",{class:"flex flex-col gap-6 justify-center items-center mb-2",children:[e(Ba,{}),e(Ua,{})]})}),e(Ma,{}),e("div",{class:"w-full m-auto flex flex-col content-end justify-end table-cards-scroll",children:[e("div",{className:"relative max-[639px]:pb-8 max-[639px]:overflow-x-scroll scroll max-[639px]:w-full max-[639px]:overflow-y-hidden max-[639px]:m-auto",children:e("div",{className:"max-[639px]:w-fit flex gap-9 max-[790px]:gap-5 max-[695px]:gap-2 justify-center -translate-y-2 min-[770px]:translate-y-12 min-[450px]:translate-y-6 max-[450px]:translate-y-7",children:r.map((d,u)=>e(Le,{index:u,...d,focus:u===t,onClick:()=>s(),onHover:()=>a(u),predictedChannels:p==null?void 0:p[u]},`${d.id}-${u}`))})}),e("div",{className:"bg-[#080106] w-full",children:e("div",{className:"select-none pointer-events-none",children:[e("img",{className:"",src:N("/images/assets/border_top.webp"),width:"100%",style:{imageRendering:"pixelated"}}),e("article",{className:"mx-4 pt-1",children:!l&&n?e("div",{class:"flex flex-col gap-1",children:e("div",{className:"flex justify-between",children:[e("div",{class:"flex gap-2 overflow-hidden",children:[e("p",{className:"text-3xl text-red-300 max-[341px]:hidden",children:n.id}),e("p",{className:"text-3xl text-slate-300 text-nowrap",children:n.name})]}),e("div",{className:"flex gap-1",children:n.cardType===R.MONSTER?e($,{children:[e("div",{className:"flex flex-col gap-1 max-[460px]:hidden",children:[e("div",{className:"flex gap-2",children:[e("img",{src:N("/images/assets/sword.webp"),alt:"Attack icon",width:"18px",height:"18px",style:{imageRendering:"pixelated"}}),e(U,{hiddenNumbers:!0,numbers:n.attack,width:18,height:18})]}),e("div",{className:"flex gap-2",children:[e("img",{src:N("/images/assets/shield.webp"),alt:"Defense icon",width:"18px",height:"18px",style:{imageRendering:"pixelated"}}),e(U,{hiddenNumbers:!0,numbers:n.defense,width:18,height:18})]})]}),e("div",{className:"flex w-full h-full items-center justify-end gap-2",children:[e("img",{src:N(`/images/types/${n.type.toLowerCase()}.webp`),alt:"Type icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"}}),e("img",{src:N(`/images/guardians/${n.guardians[0].toLowerCase()}.webp`),alt:"Guardian icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"},className:"max-[365px]:hidden"}),e("img",{src:N(`/images/guardians/${n.guardians[1].toLowerCase()}.webp`),alt:"Guardian icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"},className:"max-[365px]:hidden"})]})]}):e($,{children:e("div",{className:"flex w-full h-full items-center justify-end gap-2",children:[e("img",{src:N(n.cardType===R.TRAP?"/images/types/fiend.webp":n.cardType===R.FIELD?"/images/types/aqua.webp":n.cardType===R.EQUIP?"/images/types/warrior.webp":n.cardType===R.MAGIC?"/images/types/spellcaster.webp":n.cardType===R.RITUAL?"/images/types/zombie.webp":"/images/types/spellcaster.webp"),alt:"Type icon",width:"36px",height:"36px",style:{imageRendering:"pixelated"}}),e("p",{className:"text-4xl text-gray-400",children:n.cardType})]})})})]})}):e("div",{className:"h-[39.99px]"})}),e("img",{src:N("/images/assets/border_bottom.webp"),width:"100%",style:{imageRendering:"pixelated"}})]})})]})]})]})}function Ja(t,n){B(()=>{const a=r=>{const s=t.find(o=>o.keys.includes(r.code));s&&(r.preventDefault(),s.action())};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[t])}function Qa(){const{setFocusCard:t,focusCardIndex:n,selectHandCard:a,resetHand:r}=_(),{startFusion:s,fusing:o}=V();Ja([{keys:["ArrowLeft","KeyA"],action:()=>!o&&t(Math.max(0,(n??0)-1))},{keys:["ArrowRight","KeyD"],action:()=>!o&&t(Math.min(Me-1,(n??0)+1))},{keys:["ArrowUp","ArrowDown","KeyW","KeyS"],action:()=>!o&&a()},{keys:["Space","Enter"],action:()=>!o&&s()},{keys:["KeyR"],action:()=>!o&&r()}])}function Ka(){const{setFusing:t}=V(),{resetHand:n}=_();return Qa(),B(()=>(n(),()=>{t(!1)}),[]),e("section",{className:"max-w-[850px] m-auto h-[100vh]",children:e(Va,{})})}function Ya(){return e($,{children:[e(Y,{titlePrefix:"Simulator",description:"See all cards in your pool",keywords:"pool, cards, total, all, groups"}),e("main",{className:"!p-0",children:e(Ka,{})})]})}function Xa(){const[t,n]=I(!1),a=()=>{n(!0),setTimeout(()=>n(!1),200)};return e($,{children:[t&&e(Un,{}),e(Vt,{onChange:r=>{r.previous&&a()},children:[e(Z,{component:Ga,path:E("/")}),e(Z,{component:Ya,path:E("/simulator")}),e(Z,{component:aa,path:E("/cards/:id")}),e(Z,{component:Na,path:E("/groups/:id")}),e(Z,{component:Fa,path:E("/pool")}),e(Z,{component:De,default:!0})]})]})}function qt({size:t,className:n,highPriority:a}){const r=t==="md"?100:128,s=t==="md"?"logo100x100.webp":"logo.webp";return e("div",{style:{transform:"translate(0, 5%)",marginRight:2},class:f("hover:animate-pulse max-[200px]:hidden",n),children:e("a",{href:E("/"),"aria-label":"Home button",children:e("img",{src:E(`/images/${s}`),width:r,height:r,alt:"App logo",style:{objectFit:"cover"},class:"z-20",fetchPriority:a?"high":void 0})})})}function Za(){const[{url:t},n]=L(),{cards:a}=kt();if(t.includes("simulator"))return;const r=S(()=>{window.open(E("/simulator"),"simulator","width=924,height=788,menubar=no,toolbar=no,location=no,status=no,resizable=no,scrollbars=no,fullscreen=no")},[]);return e("header",{className:"w-full max-w-[940px] m-auto px-2 h-[70px] mt-4 shadow-xl mb-18 max-[459px]:mb-28 max-[245px]:mb-40 max-[237px]:mb-52",children:e("nav",{className:"w-full h-full relative",children:[e("span",{className:"-z-10 w-full h-full bg-gradient-one opacity-75 border-y border-b-active absolute",style:{"clip-path":"polygon(5% 0%, 100% 0%, 95% 100%, 0% 100%)",boxShadow:"rgb(0 0 0 / 82%) 5px -2px 16px 0px inset"}}),e("div",{class:"flex justify-between items-center h-full ml-10 max-[523px]:mx-8 max-[250px]:mx-4 mr-20",children:[e(qt,{size:"md",className:"max-[634px]:!w-[100px] max-[485px]:!w-[80px]",highPriority:!0}),e(Ft,{cards:a,onSelect:s=>{n(E(`/cards/${$e(s)}`))}}),e("div",{className:"max-[336px]:hidden",children:e(K,{className:"py-1 px-3 text-xl",onClick:()=>r(),children:"PLAY"})})]}),e("div",{class:"flex items-center justify-center gap-6 text-xl mt-2 flex-wrap mx-2",children:[e(le,{path:E("/"),text:"home"}),e(le,{path:E("/pool"),text:"pool"}),e(le,{path:E("/simulator"),text:"simulator"}),e(le,{path:E(`/cards/${ze(Math.floor(Math.random()*((a==null?void 0:a.length)??1))+1)}`),text:"random card"}),e(le,{path:"https://github.com/lukadevv/fusion-simulator/",text:"github",icon:e(mn,{size:"18px"}),target:"_blank"})]})]})})}function le({selected:t,path:n,text:a,target:r,icon:s}){const[{url:o}]=L();return e("a",{className:f("hover:text-orange-300 uppercase transition-all duration-150 hover:underline",(t||n.length===1?o===n:o.includes(n))&&"text-orange-300",s&&"flex gap-0.5 items-center"),href:n,role:"link",target:r,rel:r?"noopener":void 0,children:[s,a]})}const er=Ke("cursor-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ht=G(({className:t,variant:n,size:a,asChild:r=!1,...s},o)=>e(r?ot:"a",{className:f(er({variant:n,size:a,className:t})),ref:o,role:"button","aria-label":"Button link",...s}));Ht.displayName="ButtonAnchor";function tr(){const[{url:t}]=L();if(!t.includes("simulator"))return e("footer",{class:"mt-10 max-w-[960px] m-auto mb-4 px-4",children:[e("section",{class:"bg-gradient-two border-2 p-4 rounded-4xl my-4",children:e("div",{class:"grid mb-2 gap-4 grid-cols-4 max-[497px]:grid-cols-2 max-[270px]:grid-cols-1",children:[e("div",{class:"h-48 m-auto",children:e(qt,{size:"md"})}),e(Ee,{title:"Links",content:[{text:"Home",href:E("/")},{text:"Simulator",href:E("/simulator")},{text:"GitHub",href:"https://github.com/lukadevv/fusion-simulator/"}]}),e(Ee,{title:"Simulator",content:[{text:"Play",href:E("/simulator")},{text:"Pool",href:E("/pool")}]}),e(Ee,{title:"Contact",content:[{text:"GitHub",href:"https://lukadevv.github.io"}]})]})}),e("div",{class:"w-full flex justify-between items-center bg-card rounded-xl px-4",children:e("p",{class:"text-sm text-slate-300 m-auto py-1",children:[" 2025"," ",e("a",{className:"hover:text-active",href:"https://github.com/lukadevv/fusion-simulator/",children:"lukkadev"}),". Licensed under the"," ",e("a",{className:"hover:text-active",href:"https://raw.githubusercontent.com/lukadevv/fusion-simulator/refs/heads/main/LICENSE",children:"GNU General Public License v3.0"}),"."]})})]})}function Ee({title:t,content:n}){return e("div",{class:"flex flex-col gap-1 border-l-1 max-[270px]:border-l-0 max-[270px]:border-t-1 max-[270px]:pt-2 border-background px-4 pl-6",children:[e("p",{class:"mb-3 text-start text-slate-100 font-bold",children:t}),n.map(({text:a,href:r})=>r?e(Ht,{variant:"link",href:r,className:"w-fit text-slate-300",children:a}):e(F,{variant:"link",className:"w-fit text-slate-300",children:a}))]})}function nr(){const[{url:t}]=L(),n=w(()=>t.includes("simulator"),[t]);return e(Hn,{dataLessComponents:[[n?e($,{}):e("img",{srcset:`${N("/images/assets/main_background.webp")} 1920w,
                ${N("/images/assets/main_background-1280x516.webp")} 1280w,
                ${N("/images/assets/main_background-640x258.webp")} 640w`,sizes:`(max-width: 767px) 640px,
               (max-width: 1024px) 1280px,
               1920px`,src:N("/images/assets/main_background.webp"),alt:"Background image",style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",objectFit:"cover",animation:"saturationAnimation2 12000ms infinite",filter:"sepia(5px)",transform:"scaleX(-1)",willChange:"transform"},className:"-z-50"}),e(Za,{})],[e(tr,{})]],children:[e(Y,{description:"Experience the ultimate Yu-Gi-Oh! Fusion Simulator. Browse all fusion cards, discover new combinations, and test your skills in a fusion playground. Perfect for TCG and OCG players!",keywords:"fusion, simulator, yu-gi-oh, forbidden-memories, fm, all cards, all fusions"}),e(Xa,{})]})}Jt(e(nr,{}),document.getElementById("app"));export{dr as g};
